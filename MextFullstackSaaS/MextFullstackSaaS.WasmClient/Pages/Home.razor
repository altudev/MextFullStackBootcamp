@page "/"
@using Blazored.LocalStorage
@using MextFullstackSaaS.WasmClient.Services
@inject AuthenticationStateProvider AuthStateProvider
@inject IToasterService ToasterService
@inject ILocalStorageService LocalStorage


<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<AuthorizeView>
        <Authorized>
        <p>You're signed in!</p>
        <button class="btn btn-primary" @onclick="Logout">Logout</button>
    </Authorized>
    <NotAuthorized>
        <p>You're not signed in.</p>
        <button class="btn btn-primary">Login</button>
    </NotAuthorized>
</AuthorizeView>


@code
{
    private async Task Logout()
    {
        await LocalStorage.RemoveItemAsync("cto");

        await AuthStateProvider.GetAuthenticationStateAsync();

        ToasterService.ShowSuccess("You have been logged out.");
    }
}
